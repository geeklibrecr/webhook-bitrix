openapi: 3.0.0
info:
  title: Webhook Bitrix API
  version: 1.0.0
  description: API para recibir webhooks desde Bitrix24
paths:
  /webhook:
    post:
      summary: Recibe eventos desde Bitrix24
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                event:
                  type: string
                data:
                  type: object
                  description: Objeto libre con la información enviada por Bitrix24.
                  properties:
                    FIELDS:
                      type: object
                      description: Colección abierta de campos Bitrix24; cada clave se conserva tal como llega (tipo ANY).
                      additionalProperties: {}
                  additionalProperties: true
            example:
              event: ONCRMDEALUPDATE
              data:
                FIELDS:
                  ID: "{{ID}}"
                  DEAL_ID: "{{ID}}"
                  CONTACT_FULL_NAME: "{{Contacto: Nombre}}"
                  CONTACT_NAME: "{{CONTACT_NAME}}"
                  CONTACT_SECOND_NAME: "{{Contacto: Segundo Nombre}}"
                  CONTACT_LAST_NAME: "{{Contacto: Apellido}}"
                  SUM: "{{OPPORTUNITY}}"
                  AMOUNT: "{{Monto}}"
                  CURRENCY: "{{Importe (en moneda contable)}}"
                  CONTACT_EMAIL: "{{CONTACT_EMAIL}}"
                  CONTACT_PHONE: "{{Contacto: Teléfono}}"
                  ADDRESS: "{{Contacto: Dirección}}"
      responses:
        '200':
          description: OK
